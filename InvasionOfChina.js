var InvasionOfChinaOwners =
`                                 111111111111111111111111|
                                 111111111111111111111111|
                               11111111111111111111111111|
                              111111111111111111111111111|
                             1111111111111111111111111111|
                            11111111111111111111111111111|
                            11111111111111111111111111111|
                           111111111111111111111111111111|
                         111111    1111111111111111111111|
                        111111      111111111111111111111|
                            11       11111111111111111111|
                                      1111111111111111111|
                                       111111111111111111|
                                      1111111111111111111|
                                       1111 1111111111111|
                                         11    1111111111|
                                             111111111111|
                                           11111111111111|
                                           11111111111111|
                                           11111111111111|
                                          111111111111111|
                                             111111111111|
                                             111111111111|
                                              11111111111|
                                              11111111111|
                                                111111111|
                                               1111111111|
                                           11111111111111|
                                               1111111111|
                                                 11111111|
                                                 11111111|
                                                 11111111|
                                                 11111111|
                                                111111111|
                                               1111111111|
                                               1111111111|
                                              11111111111|
                                              11111111111|
                                              11111111111|
                                             1111  111111|
                                             1111  111111|
                                            1111   111111|
                                            1111   111111|
                                           11111  1111111|
                                          1111111 1111111|
                                       111111111111111111|
                                    1 1111111111111111111|
                                   1111111111111111111111|
                                  11111111111111111111111|
                               11111111111111111111111111`
.replace(/\|/g, '').replace(/^\n/, '').replace(/\n$/, '')
  .split('\n');

var InvasionOfChinaTerrains =
`DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD   D                   @|
DDDDDDDDDDDDDDDDDDDDDDDDDDDDDD  DMM D                   @|
DDDDDDDDDDDDDDDDDDDDDDDDDDDDDU MMMDDD                MMM@|
DDDDDDDDDDDDDDDDDDDDDDDDDDDDD MMM D D            U MMMMM@|
DDDDDDDDDDDDDDDDDDDDDDDDDDDDDMMM DDDD U         MMMMMMM@@|
DDDDDDDUMDDDDDDDDDDDDDDDDDDD DD DDDDD          MMM  MMM@@|
DDDDDDDDMMMMMMDDDDDDDDDDDDDDDDDD    D        MM     MM@@@|
DDDDDDDDDDDDDMMMDDMMMMMMMMMM DMMMMMMD        MM    UM@@@@|
DDDDDDDDDD DD MMMMMMMMMMM D  MMRRRRM       @@M       @@@@|
DDDDDDDDDDDD MMMMMMMMM   DDDMMRRMMRR      @@@  @ @    @@@|
DMMMDDDDDDD DD    MMMDDDDDD MMRRMMMRR    @@@  @@@@     @@|
MMMMMMDDDDDDDD DDD  DDD DDDDMMMMMU  RR   @@@ @@@@    U  @|
MMMMMMDDDDDDD DDDDDDDDMMMM DMMMMM     R@@@@@@@@@@@ @    @|
DDMMMMMDD D DDDDDD  MMRRRRRMMMMU     U@@@@@@@@@@@@@@@    |
DDDDMMMMD DD DDDDDMMMRRMMMRMMM      M  @@@@ @@@@@@@@     |
DDDDDMMMDDDDD DDUDMRRMMMDDRMMM     MM   R@@    @@@@@@    |
RRDDDDDMM DDD DDDDRRMMDDDDRMMM     MM  RR   U@@@@@@@@@   |
DRRDDDDDMMDD  DDDDRMMMDDDDRMMMU       RR   @@@@@@@@@@@  @|
DDDRDDDDDM RRRDDD RMMMDDDDRMMM       RR    @@@@@@@@@@@@@@|
DDDRDU  DMMRRR DRRRMMMDDDRR MM    U RR  U  @@@@@@@@@@@@@@|
DDDRD   DDMMMRRRRMMMMDDDDR  M      RR     @@@@@@@@@@@@@@@|
DDDRD    DDMMMMMMMMMMDDDDRRRRR   RR          @@@@@@@@@@@@|
DDDRDD    DD       DDDDRR    RRRRR   U       @@@@@@@@@@@@|
RRRRRDDMM  D        RRR                  RR   @@@@@@@@@@@|
RDDDDRDMMM   U                          RRRRR @@@@@@@@@@@|
DDDDDDRMMMM         M                  RR  URRRR@@@@@@@@@|
DDDDDDDRMMM         MMM     U     U    R    RRR@@@@@@@@@@|
DDDDDDMRMMM          MMMMMM           RR  M  RUR@@@@@@@@@|
DDDDDDMRMMM  M MM MMMM    MMM        RR MMM    @@@@@@@@@@|
DDDDDMMMRMMM MMMMMMMMM RRRR M        R MM        @@@@@@@@|
DDDDDMMMRMRMM MMMMM  RRR  RRRRRR   URR           @@@@@@@@|
DDDDMMMMMMRR     M  RR      R  RRRRRR RR MMMMMM  @@@@@@@@|
DDDMMMMMMMMMRR              R   UR     RRMMMMMMM @@@@@@@@|
MMMMMMMMMMMMMR        U     R    RR   URR MMM   @@@@@@@@@|
MMMMMMMMMMMM RR           RRR     R    R  M M  @@@@@@@@@@|
MMMM   MMMM   R          RRU      R MMM  MM M  @@@@@@@@@@|
       RRMM   R         RR   U   RR U MMMMMM  @@@@@@@@@@@|
 RRRRRRRMMM   R         R       RR     MMMMM  @@@@@@@@@@@|
RR  RR  M    RR                 R      MMMM   @@@@@@@@@@@|
   RR RRM    R     MM          RR     MMMM M @@@@  @@@@@@|
   R R M    RR  MM MM         RR     MMMMMMM @@@@  @@@@@@|
   R RRM   RR    MMMM         R    MMMMMM M @@@@   @@@@@@|
   R  R   R   U  MM M    MMM  R    MM    M  @@@@   @@@@@@|
  R  RM  RR       MMM      MMMMMM M      M @@@@@  @@@@@@@|
    RRM  R        MMM      MMMMMM U       @@@@@@@ @@@@@@@|
    R M           MM          MMM      @@@@@@@@@@@@@@@@@@|
   RRM            MM RRR            @ @@@@@@@@@@@@@@@@@@@|
   R MMMMMM      MMMM   RR         @@@@@@@@@@@@@@@@@@@@@@|
     MMMMMMMMMMMMM MMM U R        @@@@@@@@@@@@@@@@@@@@@@@|
     MMMMMMMMM       MMM  R    @@@@@@@@@@@@@@@@@@@@@@@@@@`
	.replace(/\|/g, '').replace(/^\n/, '').replace(/\n$/, '')
  .split('\n').map((x, row) => (x.split('').map((v, col) => {
	  let o = InvasionOfChinaOwners[row][col] == '1' ? 1 : 0;
	  let slots = [];
	  if (v == 'U'){
	if (o == 1) slots = Array(55).fill('F');
    else slots = Array(5).fill('F');

	  }
    return {terrain: v, owner: o, slots: slots, divisions: [], pt: pt(row, col)}

  })));

MAP_DATA = InvasionOfChinaTerrains;
pt(25, 43).prov.slots = Array(35).fill('F'); // Nanjing
pt(30, 35).prov.slots = Array(25).fill('F'); // Wuhan
pt(33, 22).prov.slots = Array(15).fill('F'); // Chongqing


let p2 = new Player();
p2.color = 'rgba(140, 193, 226, 0.25)'
p2.retreatable = 50;
p2.manpower = Math.floor(Math.random() * 50000 + 10500000);
p2.light = 50;
p2.heavy = 50;
p2.factoryInLight = 40;
let p1 = new Player();
p1.color = randomColor({alpha: 0.2, format: 'rgba', hue: 'red'})
p1.manpower = Math.floor(Math.random() * 500000 + 5000000);
p1.light = 200;
p1.heavy = 200;
p1.retreatable = 50;
p1.factoryInLight = 22;
p1.savedTemplates = [{"troop":8000,"light":20,"heavy":5,"defaultName":"Infantry Division"},{"troop":23000,"light":5,"heavy":12,"defaultName":"T12 Heavy Tank Division"},{"troop":20000,"light":25,"heavy":10,"defaultName":"T49 Armored Infantry Division"},{"troop":10000,"light":5,"heavy":6,"defaultName":"Light Motorized Mountaineer Division"},{"troop":17000,"light":38,"heavy":6,"defaultName":"T67 Armored Infantry Mountaineer Division"},{"troop":39000,"light":25,"heavy":10,"defaultName":"T918 Heavy Armored Infantry Division"},{"troop":23000,"light":10,"heavy":12,"defaultName":"T24 Heavy Tank Division"},{"troop":23000,"light":20,"heavy":3,"defaultName":"T42 Heavy Calvary Mountaineer Division"}].map(x => {let t = new Template(x.troop, x.light, x.heavy);t.defaultName = x.defaultName;return t});
p2.savedTemplates = [{"troop":8000,"light":20,"heavy":5,"defaultName":"Infantry Division"},{"troop":23000,"light":5,"heavy":12,"defaultName":"T12 Heavy Tank Division"},{"troop":20000,"light":25,"heavy":10,"defaultName":"T49 Armored Infantry Division"},{"troop":10000,"light":5,"heavy":6,"defaultName":"Light Motorized Mountaineer Division"},{"troop":17000,"light":38,"heavy":6,"defaultName":"T67 Armored Infantry Mountaineer Division"},{"troop":39000,"light":25,"heavy":10,"defaultName":"T918 Heavy Armored Infantry Division"},{"troop":23000,"light":10,"heavy":12,"defaultName":"T24 Heavy Tank Division"},{"troop":23000,"light":20,"heavy":3,"defaultName":"T42 Heavy Calvary Mountaineer Division"}].map(x => {let t = new Template(x.troop, x.light, x.heavy);t.defaultName = x.defaultName;return t});

MAP_DATA.forEach((x, row) => (x.forEach((v, col) => {
  if (v.terrain == '@') return;
  let num = (Math.random() * 8).round().min(1);
  let t2 = new Template(8000, 15 + (Math.random() * 10).round(), 5 + (Math.random() * 10).round());
  let t1 = p1.savedTemplates[Math.floor(Math.pow(Math.random(), 0.5) * p1.savedTemplates.length)];
  if (v.pt.adjacentNotToPlayer(v.pt.owner) > 0 || v.terrain == 'U')
    if (v.owner == 0)
      v.divisions = Array(v.terrain == 'U' ? (v.slots.length / 5).round() : num).fill(0).map(() => (new Division(v.owner, t2.codeName, pt(row, col), t2)))
    else
      v.divisions = Array(num).fill(0).map(() => (new Division(v.owner, t1.defaultName, pt(row, col), t1)))
})));
// Shanghai
pt(27, 46).prov.divisions = Array(10).fill(0).map(() => (new Division(1, 'Infantry Division', pt(27, 46), new Template(20000, 25, 10))))
  .concat(Array(5).fill(0).map(() => (new Division(1, 'Tank Division', pt(27, 46), new Template(20000, 10, 10)))));
pt(46, 35).prov.owner = 1;
pt(46, 35).prov.divisions = Array(10).fill(0).map(() => (new Division(1, 'Infantry Division', pt(46, 35), new Template(20000, 25, 10))));
